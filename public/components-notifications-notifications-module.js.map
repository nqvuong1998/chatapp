{"version":3,"sources":["webpack:///./src/app/components/notifications/notifications-routing.module.ts","webpack:///./src/app/components/notifications/notifications.component.css","webpack:///./src/app/components/notifications/notifications.component.html","webpack:///./src/app/components/notifications/notifications.component.ts","webpack:///./src/app/components/notifications/notifications.module.ts"],"names":[],"mappings":"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","file":"components-notifications-notifications-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { NotificationsComponent } from './notifications.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NotificationsComponent,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class NotificationsRoutingModule { }\n","module.exports = \".material-icons {\\n  color: #64b5f6 !important;\\n  margin-right: 10px;\\n  cursor: pointer;\\n}\\n\\n.time {\\n  margin-bottom: 10px !important;\\n  font-style: italic;\\n}\\n\\n.text {\\n  text-align: center;\\n  font-size: 18px !important;\\n}\\n\\n.disabled {\\n  color: #c0c0c0 !important;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy9ub3RpZmljYXRpb25zL25vdGlmaWNhdGlvbnMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLDBCQUEwQjtFQUMxQixtQkFBbUI7RUFDbkIsZ0JBQWdCO0NBQ2pCOztBQUVEO0VBQ0UsK0JBQStCO0VBQy9CLG1CQUFtQjtDQUNwQjs7QUFFRDtFQUNFLG1CQUFtQjtFQUNuQiwyQkFBMkI7Q0FDNUI7O0FBRUQ7RUFDRSwwQkFBMEI7Q0FDM0IiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnRzL25vdGlmaWNhdGlvbnMvbm90aWZpY2F0aW9ucy5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1hdGVyaWFsLWljb25zIHtcbiAgY29sb3I6ICM2NGI1ZjYgIWltcG9ydGFudDtcbiAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi50aW1lIHtcbiAgbWFyZ2luLWJvdHRvbTogMTBweCAhaW1wb3J0YW50O1xuICBmb250LXN0eWxlOiBpdGFsaWM7XG59XG5cbi50ZXh0IHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBmb250LXNpemU6IDE4cHggIWltcG9ydGFudDtcbn1cblxuLmRpc2FibGVkIHtcbiAgY29sb3I6ICNjMGMwYzAgIWltcG9ydGFudDtcbn1cbiJdfQ== */\"","module.exports = \"<app-toolbar></app-toolbar>\\n\\n<div class=\\\"container\\\" style=\\\"margin-top: 30px\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col s12 m4 l3\\\">\\n      <app-side></app-side>\\n    </div>\\n\\n    <div class=\\\"col s12 m8 l9\\\">\\n      <ul class=\\\"collection col s12 m10\\\" *ngIf=\\\"notifications.length > 0\\\">\\n        <li class=\\\"collection-item avatar\\\" *ngFor=\\\"let data of notifications\\\">\\n          <img class=\\\"circle\\\" src=\\\"http://res.cloudinary.com/vuongnguyen/image/upload/v{{data.senderId.picVersion}}/{{data.senderId.picId}}\\\"\\n            alt=\\\"\\\">\\n          <span class=\\\"title\\\">{{data.message}}</span>\\n          <a class=\\\"secondary-content\\\">\\n            <i *ngIf=\\\"!data.read\\\" class=\\\"material-icons\\\">brightness_1</i>\\n            <i *ngIf=\\\"data.read\\\" class=\\\"material-icons\\\">panorama_fish_eye</i>\\n          </a>\\n          <p class=\\\"time\\\">{{TimeFromNow(data.created)}}</p>\\n          <div>\\n            <i class=\\\"material-icons\\\" (click)=\\\"MarkNotication(data)\\\" [ngClass]=\\\"data.read ? 'disabled': 'notDisbled'\\\">\\n              check\\n            </i>\\n            <i class=\\\"material-icons\\\" (click)=\\\"DeleteNotification(data)\\\">\\n              delete_forever\\n            </i>\\n          </div>\\n        </li>\\n      </ul>\\n      <div class=\\\"row\\\" *ngIf=\\\"notifications.length <= 0\\\">\\n        <h3 class=\\\"text\\\">You have no notification</h3>\\n      </div>\\n    </div>\\n  </div>\"","import { UsersService } from './../../services/users.service';\nimport { TokenService } from './../../services/token.service';\nimport { Component, OnInit } from '@angular/core';\nimport io from 'socket.io-client';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'app-notifications',\n  templateUrl: './notifications.component.html',\n  styleUrls: ['./notifications.component.css']\n})\nexport class NotificationsComponent implements OnInit {\n  socket: any;\n\n  user: any;\n  notifications = [];\n\n  constructor(private tokenService: TokenService, private usersService: UsersService) {\n    this.socket = io('/');\n  }\n\n  ngOnInit() {\n    this.user = this.tokenService.GetPayload();\n    this.GetUser();\n    this.socket.on('refreshPage', () => {\n      this.GetUser();\n    });\n  }\n\n  GetUser() {\n    this.usersService.GetUserById(this.user._id).subscribe(data => {\n      this.notifications = data.result.notifications.reverse();\n    });\n  }\n\n  MarkNotication(data) {\n    this.usersService.MarkNotification(data._id).subscribe(value => {\n      this.socket.emit('refresh', {});\n    });\n  }\n\n  DeleteNotification(value) {\n    this.usersService.MarkNotification(value._id, true).subscribe(data => {\n      console.log(data);\n      this.socket.emit('refresh', {});\n    });\n  }\n\n  TimeFromNow(time) {\n    return moment(time).fromNow();\n  }\n}\n","import { SharedModule } from './../../shared/shared.module';\nimport { NotificationsComponent } from './notifications.component';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NotificationsRoutingModule } from './notifications-routing.module';\n\n@NgModule({\n  declarations: [NotificationsComponent],\n  imports: [\n    CommonModule,\n    SharedModule,\n    NotificationsRoutingModule\n  ]\n})\nexport class NotificationsModule { }\n"],"sourceRoot":""}